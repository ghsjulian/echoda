server {
    # 1. Listen on standard HTTP port

    # 2. Server name (replace with your domain or IP)
    server_name admin.agatuvoice.online www.admin.agatuvoice.online;

    # 3. Define the root directory for your static files (the 'build' folder)
    root /var/www/echoda/admin/dist;

    # 4. Try to serve index.html for root and directories
    index index.html index.htm;

    # --- Core SPA Routing Logic ---
    location / {
        # Check if a file or directory exists
        try_files $uri $uri/ /index.html;

        # If the requested URI ($uri) is NOT a file and NOT a directory,
        # Nginx serves /index.html instead. This allows React Router
        # to take control and handle paths like /about or /users/1.
    }

    # Optional: Cache control for static assets (for performance)
    location ~* \.(css|js|gif|jpe?g|png)$ {
        expires 1y;
        # Add headers to ensure files are served securely and correctly
        add_header Cache-Control "public";
        add_header Pragma "public";
    }

    # Optional: Gzip compression (highly recommended for faster load times)
    gzip on;
    gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;
    gzip_proxied any;
    gzip_comp_level 5;
    gzip_buffers 16 8k;
    gzip_min_length 256;

    listen 443 ssl; # managed by Certbot
    ssl_certificate /etc/letsencrypt/live/api.agatuvoice.online/fullchain.pem; # managed by Certbot
    ssl_certificate_key /etc/letsencrypt/live/api.agatuvoice.online/privkey.pem; # managed by Certbot
    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot

}
server {
    if ($host = admin.agatuvoice.online) {
        return 301 https://$host$request_uri;
    } # managed by Certbot


    listen 80;
    server_name admin.agatuvoice.online www.admin.agatuvoice.online;
    return 404; # managed by Certbot


}






